# 개념적인 튜닝 용어
## 오브젝트 스캔 유형
* 오브젝트 스캔 유형은 테이블 스캔과 인덱스 스캔으로 구분,
* 테이블 스캔은 인덱스를 거치지 않고 바로 디스크에 위치한 테이블 데이터에 접근.
* 인덱스 스캔은 인덱스로 테이블 데이터를 찾아가는 유형

### 테이블 풀 스킨
* 테이블 풀 스캔은 인덱스를 거치지 않고 테이블로 바로 직행해 처음부터 끝까지 모든 데이터를 읽는 방식
* where절의 조건문을 기준으로 활용할 수 있는 인덱스가 없거나, 전체 데이터 대비 대량의 데이터가 필요할 때 테이블 풀 스캔 방식을 사용
* 테이블 풀 스캔은 테이블의 모든 데이터를 읽어야 하므로 성능측면에서는 부정적

<br />

### 인덱스 범위 스캔
* 인덱스 범위 스캔은 말 그대로 인덱스 범위 기준으로 스캔한 뒤 스캔한 결과를 바탕으로 테이블 데이터 찾아감.
* sql에서 between, in, >, <, like 등의 조건문을 사용할 때 인덱스 범위 스캔이 발생
* 좁은 범위를 스캔할 때는 성능적으로 매우 효율적, 넓은 범위를 스캔할 때는 비효율적인 방식


<br />

### 인덱스 풀 스캔
* 인덱스 풀 스캔은 말 그대로 인덱스를 처음부터 끝까지 모두 스캔하는 방식
* 단, 테이블에 접근하지 않고 인덱스로 구성된 열 정보만 요구하는 sql 문에서 인덱스 풀 스캔이 수행 됨
* 인덱스 풀 스캔은 테이블에 접근하지 않으므로 테이블 풀 스캔보다는 효율적
* 인덱스라는 오브젝트의 전 영역을 모두 검색하는 방식인 만큼 범위를 최대한 줄이는 방향으로 튜닝 필요


<br />

### 인덱스 고유 스캔
* 인덱스 고유 스캔은 기본 키나 고유 인덱스로 테이블에 접근하는 방식.
* 인덱스를 사용하는 스캔 방식 중 가장 효율적 스캔 방법
* where 절에 = 조건으로 작성,해당 열이 기본 키 또는 고유 인덱스의 선두 열로 설정되었을 때 인덱스 고유 스캔이 발생
  
<br />

### 인덱스 루스 스캔
* 인덱스 루스 스캔은 인덱스의 피룡한 부분들만 골라 스캔하는 방식
* 인덱스 범위 스캔처럼 넓은 범위에 전부 접근하지 않고, where절 조건문 기준으로 필요한 데이터와 필요하지 않은 데이터를 구분한 뒤 불필요한 인덱스 키는 무시
* 인덱스 루스 스캔은 보통 group by 구문이나 max(), min() 함수가 사용된 경우 발생
* `이미 오름차순으로 정렬된 인덱스 에서 최댓값이나 최솟값이 필요한 경우가 이에 해당`

<br />

### 인덱스 병합 스캔
* 인덱스 병합 스캔은 테이블 내에 생성된 인덱스들을 통합해서 스캔하는 방식
* where 절에 여러 열들이 서로 다른 인덱스로 존재하면 옵티마이저가 해당하는 인덱스를 가져와 모두 활용하는 방식을 취함.
* 통합하는 방법으로는 union, intersection방식이 있으며 plan으로 확인 가능
* `인덱스 병합 스캔은 물리적으로 존재하는 개별 인덱스를 각각 수행하므로 인덱스에 접근하는 시간이 몇 배로 걸림.`
* 따라서 별개로 생성된 인덱스들은 보통 하나의 인덱스로 통합하여 sql 튜닝 하거나, sql문 자체를 독립된 하나의 인덱스만 수행하도록 변경하여 튜닝
 


## 응용 용어
### 선택도
* 선택도란 테이블의 특정 열을 기준으로 해당 열의 조건절에 따라 선택되는 데이터 비율을 의미.
* 만약 해당 열에 중복되는 데이터가 많다면 선택도가 높다.
* 해당 열에 중복되는 데이터가 적다면 선택도가 낮다.
* `낮은 선택도를 갖는 열은 데이터를 조회하는 sql문에서 원하는 데이터를 빨리 찾기 위한 인덱스 열을 생성할때 주요 고려 대상`
> 선택도 = 선택한 데이터 건수 / 전체 데이터 건수  
> 선택도 = 1 / DISTINCT(count 열명)
> 

### 카디널리티
* 카디널리티의 사전적 정의는 하나의 데이터 유형으로 정의되는 데이터 행의 개수로 전체 데이터에 접근한 뒤 출력될 것이라 예상되는 데이터 건수.
* 현업에서는 전체 행에 대한 특정 열의 중복 수치를 나타내는 지표로 활용

> 카디널리티 = 전체 데이터 건수 * 선택도

* 특정 열에 중복된 값이 많다면 카디널리티가 낮고,   
* 해당 열을 조회하면 상당수의 데이터를 거리지 못한 채 대량의 데이터가 출력되리라 예측

| a   | b  |
|-----|----|
| 1   | 1  |
| 1   |2|
| 1   |3|
| 1   |4|
| 1   |5|
| 2   |6|
| 2   |7|
| 2   |8|

* a열의 카디널리티는 낮고,
* b열의 카디널리티는 높다.

### 힌트
* 데이터를 빨리 찾을 수 있게 추가 정보를 전달하는 것
* 힌트는 아래와 같이 사용
```sql
SELECT 컬럼 
FROM 테이블 USE INDEX (인덱스명)
WHERE 조건
```
* 주요 힌트 목록

| 힌트            | 설명                         |
|---------------|----------------------------|
| STRAIGHT_JOIN | from 절에 작성된 테이블 순으로 조인을 유도 |
| USE INDEX     | 특정 인덱스를 사용하도록 유도           |
| IGNORE INDEX  | 특정 인덱스를 사용하지 않도록 유도        | 
| FORCE INDEX   | 특정 인덱스를 사용하도록 강하게 유도       |


* 주의사항 
* 힌트로 특정 인덱스를 사용하라고 명시 했는데 해당 인덱스가 삭제되면 에러 발생함.
* 
